<?php
/**
 * Generated by Haxe 4.1.4
 */

namespace asys\ssl;

use \php\net\SslSocket;
use \php\Boot;
use \asys\net\Socket as NetSocket;

class Socket extends NetSocket {
	/**
	 * @param NetSocket $socket
	 * 
	 * @return Socket
	 */
	public static function upgrade ($socket) {
		$resource = $socket->socket->__s;
		\stream_set_blocking($resource, true);
		stream_socket_enable_crypto($resource, true, STREAM_CRYPTO_METHOD_TLS_CLIENT);
		$socket->setStreams();
		return $socket;
	}

	/**
	 * @return void
	 */
	public function __construct () {
		parent::__construct();
	}

	/**
	 * @return void
	 */
	public function createSocket () {
		$this->socket = new SslSocket();
	}
}

Boot::registerClass(Socket::class, 'asys.ssl.Socket');
